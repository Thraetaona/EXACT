<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>EXACT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="EXACT">
    <meta name="author" content="Fereydoun Memarzanjany">
    <meta name="description" content="Graphical Intel iAPX 86/10 Emulator Written In Pure WebAssembly.">
    <meta name="keywords" content="intel, 8086, iapx, emulator, webassembly, wasm, wat, wast, assembly, browser, cpu, cpu-emulator, 16bit, emulation, graphical">
    <link rel="stylesheet" type="text/css" href="stylesheet.css" />
  </head>


  <body>
    <h1><code>EXACT</code></h1>
    <p>
      <strong><b>E</b>mulating <b>X</b>86 i<b>A</b>PX <b>C</b>PU on Ne<b>T</b></strong>
    </p>
    
    <section class="container">
      <small>Choose from the examples <br> or upload you'r own</small>
      <hr id="vr">
      <span class="label">Program:</span>
      <select class="button" id="examples">
      </select>
      <label class="button"><input type="file" id="upload" />Upload</label>
    </section>
    <section class="container">
      <button class="button" id='run'>Execute</button>
      <button class="button" id='step'>Step</button>
      <button class="button" id='stop'>Halt</button>
    </section>

    <canvas id="screen" width="640" height="480" ></canvas>

    <section class="container">
      <fieldset id="registers"> <legend>Registers:</legend>
        AX: <var id="AX">0</var>
        CX: <var id="CX">0</var>
        DX: <var id="DX">0</var>
        BX: <var id="BX">0</var>
        <br>
        SP: <var id="SP">0</var>
        BP: <var id="BP">0</var>
        SI: <var id="SI">0</var>
        DI: <var id="DI">0</var>
        <br>
        AL: <var id="AL">0</var>
        CL: <var id="CL">0</var>
        DL: <var id="DL">0</var>
        BL: <var id="BL">0</var>
        AH: <var id="AH">0</var>
        CH: <var id="CH">0</var>
        DH: <var id="DH">0</var>
        BH: <var id="BH">0</var>
        <br>
        ES: <var id="ES">0</var>
        CS: <var id="CS">0</var>
        SS: <var id="SS">0</var>
        DS: <var id="DS">0</var>
        <br>
        CF: <var id="CF">0</var>
        PF: <var id="PF">0</var>
        AF: <var id="AF">0</var>
        OF: <var id="OF">0</var>
        ZF: <var id="ZF">0</var>
        SF: <var id="SF">0</var>
        TF: <var id="TF">0</var>
        IF: <var id="IF">0</var>
        DF: <var id="DF">0</var>
      </fieldset>
      <fieldset id="memory"> <legend>Memory:</legend>
      </fieldset>
    </section>


    <script type="module" async>
      "use strict";
      (async () => {
        const imports = {
          env: {
            memory: new WebAssembly.Memory({initial: 16, maximum: 16384, shared: false}),
          }
        }
        
        WebAssembly.instantiateStreaming(fetch('./emulator/8086.wasm'), imports)
        .then(wasm => wasm.instance.exports.start());
      })();
    </script>
  </body>
</html>